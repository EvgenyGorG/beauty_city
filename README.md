# Чат бот для сети салонов красоты "Beauty city"
Чат бот позволяет записаться на услугу к мастеру через `telegram`.

## Функции и возможности бота
- Запись на конкретную услугу, в конкретный салон, к предложенным мастерам и в удобное время;
- Запись к любимому мастеру;
- Просмотр записей;
- Просмотр контактов менеджера;
- Возможность оставить отзыв.

## Описание моделей и работа с базой данных
- **Salon**  
Хранит информацию о салонах красоты — название и часы работы.

- **Category**  
Категории услуг и мастеров.

- **Master**  
Мастера, их специализация (категория) и салон, в котором они работают.

- **Service**  
Услуги, которые предоставляет салон, с указанием категории,
названия, цены и длительности.

- **Client**  
Клиенты, записывающиеся на услуги, с данными пользователя и контактами.

- **Appointment**  
Записи клиентов на услуги с указанием клиента, салона, мастера,
услуги и времени записи.

## Запуск
Python 3 должен быть установлен, 
рекомендуемая версия [Python 3.10](https://www.python.org/downloads/release/python-3100/).

Для изоляции проекта рекомендуется использовать `.venv` виртуальное окружение:
```shell
python -m venv .venv
```

Активируйте виртуальное окружение:
**Windows**
```shell
.venv\Scripts\activate
```
**Linux/macOS**
```shell
source .venv/bin/activate
```

Затем используйте `pip` для установки зависимостей:
```shell
pip install -r requirements.txt
```

Настройка базы данных:
```shell
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser
```
Команды `makemigrations` и `migrate` применяют миграции к базе данных.
Команда `createsuperuser` создает администратора для работы с приложением `django admin`.
При вводе команды, вам будет предложено создать логин и пароль,
для дальнейшей работы в приложении администрирования.

Для запуска и администрирования базы данных, используйте следующие команды:
```shell
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser
python manage.py runserver
```
Команда `runserver` запускает локальный сервер, перейдя по ссылке на который,
вы сможете попасть на административную страничку `django`, при первом запуске вам необходимо
ввести логин и пароль, затем можно приступать к работе.

Для запуска бота:
```shell
python bot.py
```
С этого момента бот находится в работе и реагирует на сообщения пользователя. 
Для остановки бота нажмите Ctrl+C.

## Переменные окружения
Для работы с переменными окружения необходимо создать файл `.env` в корне проекта.
В файле должны находиться следующие обязательные переменные:
- DJANGO_SECRET_KEY;
- TG_TOKEN;
- FEEDBACK_CHAT_ID.

`DJANGO_SECRET_KEY` - секретная строка для обеспечения безопасности `DJANGO` приложения.
Можно сгенерировать при помощи команды:
```shell
python -c "from django.core.management.utils import get_random_secret_key;
 print(get_random_secret_key())"
```
Скопируйте и вставьте выданный ключ в файл `.env`.

`TG_TOKEN` и `FEEDBACK_CHAT_ID` - токен телеграм бота и чат id группы(канала), в которой будут публиковаться
отзывы, соответственно. Ознакомиться с туториалом о том, как зарегистрировать и получить токен бота,
а так же о том, как создать группу или канал в телеграм 
можно по ссылке [Отложенный постинг](https://smmplanner.com/blog/otlozhennyj-posting-v-telegram/).
Обратите внимание, `FEEDBACK_CHAT_ID` должна иметь вид `@name_group`.

## Цели проекта
Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).
